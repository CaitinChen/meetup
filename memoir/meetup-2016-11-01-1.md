---
title: How to write a good commit message
date: 2016-11-01
tags: ["commit message"]
author: ['金坤']
type: meetup
meetup_type: memoir
---


## Why a good commit message matters
- Speed up the review process. 
- Help the future maintaners establish the content of the change. The future maintaner could be you yourself several months later.
- Help to build a good release notes.

## Why a good formatted commit message matters- Allow filtering commits	
	For example, you can get new features in this release:
		$ git log <last release> HEAD --grep feature- Provide better information when browsing the history	$ git log <last tag> HEAD --pretty=format:%s
	- Allow generating change log or Release Notes using script	You can use conventional-changelog to generate the change log, the output could be like Change log example.
## What is a good commit message
A common commit message:

```Fix login bug
```
A good example:

```Redirect user to the requested page after loginhttps://trello.com/path/to/relevant/cardUsers were being redirected to the home page after login, which is less useful than redirecting to the page they had originally requested before being redirected to the login form.* Store requested path in a session variable
* Redirect to the stored location after successfully logging in the userSource: https://robots.thoughtbot.com/5-useful-tips-for-a-better-commit-message
```## A good commit message answers the following questions:
- Why is it necessary? 
	It may fix a bug, it may add a feature, it may improve performance, reliability, stability, or just be a change for the sake of correctness.
- How does it address the issue? 
	For short obvious patches this part can be omitted, but it should be a high level description of what the approach was.
- What effects does the patch have? 
	(In addition to the obvious ones, this may include benchmarks, side effects, etc.)
## How to write a good commit message
- Good habits
- Good format
- Good language### Good habitsMake sure that the commit message must contain all the information required to fully understand & review the patch for correctness.+ Pay attention to the first commit line which works as the subject of the commit message. It is mandatory and is the most important.
+ Describe why a change is being made.
+ Describe the limitations of the current code.
+ Limit using the -m commit flag. AVOID the following examples:
	- git commit -m "Fix login bug"
	- git commit -m "Up"
	- git commit -m "just on line"
+ A commit contains exactly one logical change. AVOID the following commits:
	- End-of-day commits
	- Per-file commit
	- Lazy commit messages: “misc fixes and cleanups”
	- Two changes in one patch. "Fixed bug 2345 and renamed all pd to PD`".
+ Do not assume the reviewer understands the original problem.
+ Do not assume the code is self-evident/self-documenting.### Good format
Apply the PingCAP format: [https://github.com/pingcap/tikv/blob/master/CONTRIBUTING.md](https://github.com/pingcap/tikv/blob/master/CONTRIBUTING.md)
```<subsystem>: <what changed><BLANK LINE><why this change was made><BLANK LINE><footer>(optional)<subsystem>: <what changed>
```+ This line works as the subject and states the summary of changes.+ Capitalize the first letter and leave no period at the end.+ Use the imperative mood. The subject fits the following sentence:	If applied, this commit will your subject line here (for example, update getting started documentation)+ 69 characters the most, 50 or less is preferred+ About the <subsystem>, use the following format:	- If it’s one subsystem: pd:	- If there are more than one subsystems: util/codec,util/types:	- If there are many subsystems: \*:<why this change was made>+ More detailed explanatory text, if necessary. 
+ Don't describe the code, describe the intent (why) and the approach(what) in a present tense.
+ Wrap it to about 72 characters or so.
+ Further paragraphs come after blank lines.
+ Bullet points are okay, too.
+ If it seems difficult to summarize what your commit does, it may be because it includes several logical changes or bug fixes, and are better split up into several commits using git add -p.
<footer>(optional)+ DocImpact/APIImpact/SecurityImpact/UpgradeImpact
+ Close-Bug/Related-Bug/Partial-Bug: #1555
+ Signed-off-by = CLA### Good language+ Use the active voice 
 + Use articles wherever needed
+ Use simple verb tenses
+ Use language consistently
+ Avoid lengthy compound words
+ Use relatively short sentences
+ Use full sentences
+ Do not abbreviate unless it’s absolutely necessary## Tools
+ Commitizen helps you write a good commit message
+ validate-commit-msg helps you check if your message complies with the format.
+ conventional-changelog helps you build the Change log
## Special thanks to
+ [http://who-t.blogspot.jp/2009/12/on-commit-messages.html](http://who-t.blogspot.jp/2009/12/on-commit-messages.html)
+ [http://chris.beams.io/posts/git-commit/](http://chris.beams.io/posts/git-commit/)
+ [https://wiki.openstack.org/wiki/GitCommitMessages](https://wiki.openstack.org/wiki/GitCommitMessages)
+ [https://ruby-china.org/topics/15737](https://ruby-china.org/topics/15737)
+ [http://www.oschina.net/news/69705/git-commit-message-and-changelog-g](http://www.oschina.net/news/69705/git-commit-message-and-changelog-g)